<div class="slider-section">
  <div class="swiper my-slider">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        <div class="swiper-slide" {{ block.shopify_attributes }}>
          {% if block.settings.image != blank %}
            <img
              src="{{ block.settings.image | image_url: width: 1600 }}"
              alt="{{ block.settings.image.alt | escape }}"
              width="{{ block.settings.image.width }}"
              height="{{ block.settings.image.height }}"
              loading="lazy">
            <div class="slide-overlay">
              {% if block.settings.title != blank %}
                <div class="slide-title">
                  <h2 {{ block.shopify_attributes }}>
                    {{ block.settings.title }}
                  </h2>
                </div>
              {% endif %}
              {% if block.settings.button_text != blank %}
                <div class="slide-button">
                  <a href="{{ block.settings.link | default: '/collections/all' }}" {{ block.shopify_attributes }}>
                    {{ block.settings.button_text }}
                  </a>
                </div>
              {% endif %}
            </div>
          {% endif %}
        </div>

      {% endfor %}

    </div>
    <div class="swiper-pagination"></div>
  </div>
</div>


{% stylesheet %}
  .slider-section {
    width: 100%;
    max-width: 1600px;
    margin: 20px auto;
    position: relative;
    text-align: center;
    height: auto;

  }

  .slider-section img {
    width: 100%;
    height: auto;
    object-fit: cover;
    border-radius: 8px;
  }

  .swiper-pagination {
    position: relative !important;
    margin-top: 12px;
  }

  .swiper-pagination-bullet {
    width: 10px;
    height: 10px;
    background: #999;
    opacity: 1;
    margin: 0 6px !important;
  }


  .swiper-pagination-bullet-active {
    background: #000;
  }

  .slide-title {
    font-size: 2rem;
    margin-bottom: 12px;
    position: absolute;
    left: 10%;
    bottom: 20%;
    color: white;
  }
  .slide-button {
    max-width: 89vw;
    position: absolute;
    position: absolute;
    left: 10%;
    bottom: 10%;
    text-overflow: ellipsis;
  }
  .slide-button a {
    position: relative;
    display: inline-block;
    padding: 12px 24px;
    border: 1px solid #999;
    border-radius: 6px;
    color: white;
    text-decoration: none;
    overflow: hidden;
    z-index: 1;
  }

  .slide-button a::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgb(46, 36, 38);
    color: white;
    transform: translate(0, 0);
    transition: transform 280ms cubic-bezier(0.22,0.9,0.35,1);
    z-index: -1;
    pointer-events: none;
    opacity: 0;
  }

  .slide-button a.in::before {
    transform: translate(0, 0);
    opacity: 1;
  }

  .slide-button a.pre-left::before {
    transform: translateX(-100%);
  }
  .slide-button a.pre-right::before {
    transform: translateX(100%);
  }
  .slide-button a.pre-top::before {
    transform: translateY(-100%);
  }
  .slide-button a.pre-bottom::before {
    transform: translateY(100%);
  }

  .slide-button a.in::before {
    transform: translate(0, 0);
  }


{% endstylesheet %}

{% javascript %}
  const slider = new Swiper(".my-slider", {
    loop: false,
    autoplay: {
      delay: 1000,
      disableOnInteraction: false
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true
    }
  });

  const sliderEl = document.querySelector(".my-slider");

  sliderEl.addEventListener("mouseenter", () => {
    slider.autoplay.stop();
  });

  sliderEl.addEventListener("mouseleave", () => {
    slider.autoplay.start();
  });
  function computeNearestSide(e, el) {
    const rect = el.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const top = y;
    const bottom = rect.height - y;
    const left = x;
    const right = rect.width - x;
    const min = Math.min(top, bottom, left, right);
    if (min === top) return'top';
    

    if (min === bottom) return'bottom';
    

    if (min === left) return'left';
    

    return 'right';
  }

  document.querySelectorAll(".slide-button a").forEach((btn) => {
    btn.addEventListener("mouseenter", (e) => {
      const side = computeNearestSide(e, btn);
      btn.classList.remove("pre-left", "pre-right", "pre-top", "pre-bottom", "in");
      btn.classList.add("pre-" + side);
      void btn.offsetWidth;
      btn.classList.add("in");
    });
    btn.addEventListener("mouseleave", (e) => {
      const side = computeNearestSide(e, btn);
      btn.classList.remove("in");
      requestAnimationFrame(() => {
        btn.classList.remove("pre-left", "pre-right", "pre-top", "pre-bottom");
        btn.classList.add("pre-" + side);
      });
    });
  });

{% endjavascript %}
{% schema %}
  {
    "name": "Image Slider",
    "settings": [],
    "blocks": [
      {
        "type": "image",
        "name": "Slide",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Slide Image"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Main Title",
            "default": "Take your mini rhode routine on the go."
          },
          {
            "type": "text",
            "id": "subtitle",
            "label": "Sub Title",
            "default": "Summer 2025 Drop"
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Button Text",
            "default": "Shop All"
          }, {
            "type": "url",
            "id": "link",
            "label": "Button Link"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Image Slider",
        "blocks": [
          {
            "type": "image"
          }, {
            "type": "image"
          }, {
            "type": "image"
          }
        ]
      }
    ]
  }
{% endschema %}